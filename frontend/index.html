<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CloudCode - Online Compiler</title>

    <!-- CodeMirror CSS and JS -->
    <link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css" />
    <link rel="stylesheet" href="/vendor/codemirror/theme/dracula.css" />
    <script src="/vendor/codemirror/lib/codemirror.js"></script>
    <script src="/vendor/codemirror/mode/clike/clike.js"></script>
    <script src="/vendor/codemirror/mode/python/python.js"></script>
    <script src="/vendor/codemirror/mode/javascript/javascript.js"></script>
    <script src="/vendor/codemirror/addon/edit/closebrackets.js"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <img src="./c.png" alt="CloudCode Logo" />
        <span>CloudCode</span>
      </div>

      <div class="header-controls">
        <!-- Language Selector -->
        <div class="language-selector">
          <button class="language-btn" onclick="toggleLanguageDropdown()">
            <span id="current-language">Python</span>
            <svg
              class="icon"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"
              ></path>
            </svg>
          </button>
          <div class="language-dropdown" id="language-dropdown">
            <div
              class="language-option"
              onclick="selectLanguage('cpp17', 'C++')"
            >
              C++
            </div>
            <div
              class="language-option"
              onclick="selectLanguage('java', 'Java')"
            >
              Java
            </div>
            <div
              class="language-option"
              onclick="selectLanguage('python3', 'Python')"
            >
              Python
            </div>
            <div
              class="language-option"
              onclick="selectLanguage('nodejs', 'JavaScript')"
            >
              JavaScript
            </div>
          </div>
        </div>

        <!-- User Menu -->
        <div class="user-menu" id="user-menu">
          <button class="btn" onclick="showSignInModal()" id="signin-btn">
            <svg
              class="icon"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
              ></path>
            </svg>
            Sign In
          </button>
        </div>
      </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
      <!-- Sidebar -->
      <div class="sidebar">
        <div class="sidebar-header">
          <span class="sidebar-title">Files</span>
          <button
            class="add-file-btn tooltip"
            data-tooltip="Add new file"
            onclick="addNewFile()"
          >
            <svg
              class="icon"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 4v16m8-8H4"
              ></path>
            </svg>
          </button>
        </div>
        <div class="files-list" id="files-list">
          <!-- Files will be dynamically added here -->
        </div>
      </div>

      <!-- Editor Container -->
      <div class="editor-container">
        <!-- Tabs -->
        <div class="tabs-container" id="tabs-container">
          <!-- Tabs will be dynamically added here -->
        </div>

        <!-- Editor Header -->
        <div class="editor-header">
          <span class="editor-title" id="editor-title">main.py</span>
          <div class="editor-actions">
            <button class="btn tooltip" data-tooltip="Save file">
              <svg
                class="icon"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"
                ></path>
              </svg>
              Save
            </button>
            <a
              href="#"
              onclick="downloadCurrentFile()"
              class="btn tooltip"
              data-tooltip="Download file"
            >
              <svg
                class="icon"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                ></path>
              </svg>
              Download
            </a>
            <button class="run-btn" onclick="runCode()" id="run-btn">
              <span class="run-icon">
                <svg
                  class="icon"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M12 7a4 4 0 11-8 0 4 4 0 018 0z"
                  ></path>
                </svg>
              </span>
              Run
            </button>
          </div>
        </div>

        <!-- Editor Content -->
        <div class="editor-content">
          <textarea
            class="code-editor"
            id="code-editor"
            placeholder="Start coding here..."
            spellcheck="false"
          ></textarea>
        </div>

        <!-- Input Section -->
        <div class="input-section">
          <div class="input-header">Input (stdin)</div>
          <div class="input-content">
            <textarea
              id="stdin"
              class="input-field"
              placeholder="Enter input for your program here..."
            ></textarea>
          </div>
        </div>

        <!-- Output Section -->
        <div class="output-section">
          <div class="output-header">Output</div>
          <div class="output-content" id="output">
            Click Run to execute your code...
          </div>
        </div>
      </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
      <span id="status-left">Ready</span>
      <span id="status-right">Ln 1, Col 1</span>
    </div>

    <!-- Sign In Modal -->
    <div class="signin-modal" id="signin-modal">
      <div class="signin-content">
        <button class="close-modal" onclick="hideSignInModal()">
          <svg
            class="icon"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"
            ></path>
          </svg>
        </button>
        <h2 class="signin-title">Sign In to CloudCode</h2>
        <form onsubmit="handleSignIn(event)">
          <div class="input-group">
            <label class="input-label">Email</label>
            <input
              type="email"
              class="input-field"
              placeholder="Enter your email"
              required
            />
          </div>
          <div class="input-group">
            <label class="input-label">Password</label>
            <input
              type="password"
              class="input-field"
              placeholder="Enter your password"
              required
            />
          </div>
          <div class="signin-actions">
            <button
              type="button"
              class="btn btn-full"
              onclick="hideSignInModal()"
            >
              Cancel
            </button>
            <button type="submit" class="btn primary btn-full">Sign In</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Your app script -->
    <script src="/script.js"></script>
  </body>
</html>
